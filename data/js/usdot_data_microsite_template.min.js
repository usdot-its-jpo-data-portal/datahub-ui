"use strict";Vue.component("dot-header",{template:'<div id="dotTopBanner" style="width: 100%; background: #152350; height: 60px; padding: 5px 0 0 10px">\n                <a style="background: none" href="https://transportation.gov">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 35px; margin-left: 25px; margin-top: 8px;"alt="department of transportation logo">\n                </a>\n                <div id="dotTopLinks" style="line-height: 30px; background: #04214f">\n                    <a class="headHovers" href="https://www.transportation.gov/mission/about-us" style="font-size: 11px; width: 70px; background: #04214f">ABOUT DOT&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/briefingroom" style="font-size: 11px; width: 80px; background: #04214f">&emsp;&nbsp;BRIEFING ROOM&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/our-activities" style="margin-right: 30px; font-size: 11px; width: 70px; background: #04214f">&emsp;&nbsp;OUR ACTIVITIES</a>\n                </div>\n            </div>'}),Vue.component("navigation-top",{template:'<div class="navigation-bar navBarLinks">\n                 <a class="headHovers navBarLinks" href="/">ITS JPO SITE</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data">HOME</a> <div style="font-size: 15px; padding:3px 5px 7px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/about/">ABOUT</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/public-access/">PUBLIC ACCESS</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/metrics/">METRICS</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/visualizations/">VISUALIZATIONS</a>\n                 <a class="headHovers navBarLinks" href="https://github.com/usdot-its-jpo-data-portal/microsite" style="float:right; text-align:right;padding:3px 7px 3px 7px;">VIEW THIS PROJECT ON GITHUB</a>\n             </div>'}),Vue.component("microsite-footer",{data:function(){return{contact_email:""}},created:function(){var t=this;$.getJSON("/data/template_categories.json",function(e){t.contact_email=e.contact_email})},template:'<div id="footerInfo" style="padding-top: 20px;">\n                <div style="display:inline; font-size:50px; font-weight:100; text-align:center">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 30px;margin-right: 3px;" alt="DOT Logo" /> \n                    |\n                    <img src="/data/images/icons/ITS_JPO.png" style="height: 27px" alt="ITS JPO Logo" /> \n                </div>\n                <p style="font-weight: bold;">Questions? Contact Us</p>\n                <p id="contactEmail">{{ contact_email }}</p>\n            </div>'}),Vue.component("search-main",{props:["query"],data:function(){return{background_image:"",search_placeholder:"",socrata_url:"https://api.us.socrata.com/api/catalog/v1?q=",socrata_domain:"data.transportation.gov",query:"",totalDataCount:0}},created:function(){this.datasetCount();var t=this;$.getJSON("/data/template_categories.json",function(e){t.background_image=e.background_image})},methods:{datasetCount:function(){var t=this;$.get(t.socrata_url+"&search_context="+t.socrata_domain+"&domains=data.transportation.gov&tags=intelligent%20transportation%20systems%20(its)",function(e){t.totalDataCount=e.results.length,t.search_placeholder=t.totalDataCount.toString()+" data sets and counting!"})},searchSend:function(t){sessionStorage.setItem("sentSearchTerm",t),window.location.href="search.html"}},template:'<div class="TitleText" style="padding-top: 40px;">\n                    <p class="searchHeaderText">EXPLORE OUR DATA</p>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-top: 10px;">Department of Transportation ITS JPO Data</h3>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-bottom: 12px;"> Welcome to the ITS JPO public access point for ITS data</h3>\n\n                    <label for="mainSearch" class="hidden">Search</label>\n                    <input class="mainSearch" id="mainSearch" v-model="query" v-on:keyup.enter="searchSend(query)" v-bind:placeholder="search_placeholder"><button class="searchButton" v-on:click="searchSend(query)">SEARCH</button>\n                </div>'}),Vue.component("search-results",{props:["query"],data:function(){return{NTLJson:[],searchResults:[],relevanceSortedSearchResults:[],dateSortedSearchResults:[],nameSortedSearchResults:[],socrata_url:"https://api.us.socrata.com/api/catalog/v1?q=",socrata_domain:"data.transportation.gov",seeMoreToggler:[]}},created:function(){this.loadNTL(),this.search(this.query)},methods:{search:function(t){this.searchResults=[],this.addSocratatoSearchResult(t),this.addNTLtoSearchResult(t),this.relevanceSortedSearchResults=this.searchResults.slice(),this.dateSortedSearchResults=this.searchResults.slice(),this.dateSortedSearchResults.sort(this.compareDate),this.nameSortedSearchResults=this.searchResults.slice(),this.nameSortedSearchResults.sort(this.compareName);for(var e=0;e<this.searchResults.length;e+=1)this.seeMoreToggler[e]=!0;document.getElementsByClassName("filterRelevance")[0].checked=!0},loadNTL:function(){var t;$.ajaxSetup({async:!1});var e=this;$.get("https://rosap.ntl.bts.gov/fedora/export/view/collection/dot:239?from=2018-01-01T00:00:00Z&rows=9999",function(a){var s=JSON.parse(a);for(t=0;t<s.response.docs.length;t++)if("Dataset"==s.response.docs[t]["mods.sm_resource_type"][0]){var n,i={};i.name=s.response.docs[t]["dc.title"][0],i.description=s.response.docs[t]["mods.abstract"][0],i.date=e.formatDate(s.response.docs[t]["fgs.createdDate"]);var o=[];for(o[0]="Research Results",n=0;n<s.response.docs[t]["mods.sm_key_words"].length;n++)o[n+1]=s.response.docs[t]["mods.sm_key_words"][n];i.tags=o,i.tags.sort();var r=s.response.docs[t].PID.split(":")[1];i.link="https://rosap.ntl.bts.gov/view/dot/"+r,e.NTLJson.push(i)}}),$.ajaxSetup({async:!0})},addNTLtoSearchResult:function(t){var e;for(e=0;e<this.NTLJson.length;e++)if(this.NTLJson[e].name.toLowerCase().search(t.toLowerCase())>-1)this.searchResults.push(this.NTLJson[e]);else if(this.NTLJson[e].description.toLowerCase().search(t.toLowerCase())>-1)this.searchResults.push(this.NTLJson[e]);else{var a;for(a=0;a<this.NTLJson[e].tags.length;a++)if(this.NTLJson[e].tags[a].toLowerCase().search(t.toLowerCase())>-1){this.searchResults.push(this.NTLJson[e]);break}}},addSocratatoSearchResult:function(t){var e,a=this;$.get(a.socrata_url+t+"&search_context="+a.socrata_domain+"&domains=data.transportation.gov&tags=intelligent%20transportation%20systems%20(its)",function(t){for(e=0;e<t.results.length;e++){var s,n={};n.name=t.results[e].resource.name,n.description=t.results[e].resource.description,n.date=t.results[e].resource.updatedAt.substring(0,10)<7?t.results[e].resource.updatedAt.substring(0,10):a.formatDate(t.results[e].resource.updatedAt.substring(0,10));var i=[];for(s=0;s<t.results[e].classification.domain_tags.length;s++)i[s]=t.results[e].classification.domain_tags[s];n.tags=i,n.tags.sort(),n.link=t.results[e].link,a.searchResults.push(n)}})},compareName:function(t,e){var a=t.name.toUpperCase(),s=e.name.toUpperCase(),n=0;return a>s?n=1:a<s&&(n=-1),n},compareDate:function(t,e){var a=new Date(t.date),s=new Date(e.date),n=0;return a<s?n=1:a>s&&(n=-1),n},formatDate:function(t){var e=new Date(t),a=e.getDate(),s=e.getMonth(),n=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s]+" "+a+" "+n},dropDownFilter:function(){document.getElementsByClassName("filterName")[0].checked?this.searchResults=this.nameSortedSearchResults.slice():document.getElementsByClassName("filterDate")[0].checked?this.searchResults=this.dateSortedSearchResults.slice():document.getElementsByClassName("filterRelevance")[0].checked&&(this.searchResults=this.relevanceSortedSearchResults.slice())},toggleSeeMore:function(t){this.seeMoreToggler[t]=!this.seeMoreToggler[t],this.$forceUpdate()}},template:'<div id="searchresults" class="contentArea searchResults">\n                    <br>\n                    <div style="display: flex;">\n                        <button id="returnPage" class="readButton" style="font-size: 15px; margin-left: 80px;margin-bottom: 10px" v-on:click="window.location.href = \'/data/\'">Return to Main Page &raquo;</button>\n                    </div>\n                    <div style="display: flex; float: right; margin-right: 80px">\n                        <p style="line-height: 1.8" class="resultsSectionHeading">Sort By: &nbsp;</p>\n                        <nav class="segmented-button">\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="R" id="seg-Relevance" class="filterRelevance" checked>\n                            <label for="seg-Relevance" class="first">Relevance</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="N" id="seg-Name" class="filterName">\n                            <label for="seg-Name" class="first">Name</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="D" id="seg-Date" class="filterDate">\n                            <label for="seg-Date" class="last">Date</label>\n                        </nav>\n                    </div>\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>SEARCH RESULTS FOR:&nbsp;</b></p>\n                        <p class="resultsQuery"><b id="resultsQuery">{{query}}</b></p><br>\n                    </div>\n\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>Number of results:&nbsp;</b><p>\n                        <p class="resultsCount"><b>{{searchResults.length}}</b></p><br>\n                    </div>\n\n\n\n                    <hr class="resultsDivider" noshade>\n                    <br>\n\n                    \x3c!--generates a bullet point for each search result item--\x3e\n                    <div class="search-results" style="margin-left: 100px; margin-right: 100px;">\n\n                        \x3c!--displays results if there are results--\x3e\n                        <ul v-if="searchResults.length > 0" style="list-style: none; padding-left: 0px;">\n                            <li v-model="seeMoreToggler" v-for="(item,index) in searchResults" style="margin-bottom: 30px; list-style: none;">\n\n                                <table style="width: 100%">\n                                    <tr>\n                                        <td style="width: 70%">\n                                            \x3c!--the data set name--\x3e\n                                            <a class=\'resultItemHeader\' style="padding-right: 0%" :href="item.link" target="_blank">\n                                                {{ item.name }}\n\n                                            </a>\n                                        </td>\n                                        <td style="text-align: right; width: 30%">\n                                            <p class="resultItemHeader" style="float: right; font-size: 18px;">\n                                                Date Added: {{ item.date}}\n                                            </p>\n                                        </td>\n                                    </tr>\n                                </table>\n                                \x3c!--the data set description--\x3e\n                                <p class="dataset-description" v-if="item.description.length > 300 && seeMoreToggler[index] && item.description.indexOf(\' \', 290) != -1" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description.substring(0,item.description.indexOf(\' \', 290))"></span>...</br><button class="readButton" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 300 && seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description.substring(0,item.description.lastIndexOf(\' \'))"></span>{{ item.description.substring(0,item.description.lastIndexOf(" "))}}...</br><button class="readButton" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 300 && !seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description"></span></br><button class="readButton" v-on:click="toggleSeeMore(index)">Read Less</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 0" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description"></span></p>\n                                <p class="dataset-description" v-else style="font-size: 15px; padding-top: 5px;">No description available.</p>\n\n                                \x3c!--lists the domain tags--\x3e\n                                <div v-if="item.tags.length > 0" style="padding-top: 5px;">\n                                    <p style="float:left; padding: 3px; height: 30px; line-height: 30px;">Tags: </p>\n                                    <button v-for="tag in item.tags" class=\'tag\' v-on:click="search(tag)">{{tag}}</button>\n                                </div>\n                                <hr v-if="searchResults.length != index+1" style="border-color: #DEDEDE" noshade>\n                            </li>\n                            <div v-else>\n                                <p>No search results.</p>\n                            </div>\n                    </div>\n                </div>'}),Vue.component("category-search",{data:function(){return{buttons:[]}},created:function(){this.load_categories_json()},methods:{load_categories_json:function(){var t=this;$.ajaxSetup({async:!1}),$.getJSON("template_categories.json",function(e){var a;for(a=0;a<Math.min(e.maxButtonCount,e.buttons.length);a++)t.buttons.push({labels:e.buttons[a].CategoryName,imgIcons:e.buttons[a].imgIcons,rolloverImages:e.buttons[a].rolloverImages,altText:e.buttons[a].altText,id:"bterm"+a})}),$.ajaxSetup({async:!0})},searchSend:function(t){sessionStorage.setItem("sentSearchTerm",t),window.location.href="search.html"}},template:'\n        <div id="categoryDiv">\n            <img class="contentIndicator" style="top: -57px" src="images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="CategoryAreaHead">\n                <p class="headingFont" style="color: #3585B2">POPULAR DATA SET TOPICS</p>\n            </div>\n\n            <div id="categoryArea" class="contentArea categorylayout">\n                <div id="bulmaDataset" class="columns is-multiline" style="padding: 0 0 5% 0; height: 100%">\n                    <div class="bulmaCategories column is-one-quarter" v-for="btn in buttons">\n                        <button v-bind:id="btn.id" class="topic" vertical-align="middle" style="padding-bottom: 10px;" v-on:click="searchSend(btn.labels)">\n                            <img v-bind:src="btn.imgIcons" v-bind:alt="btn.altText" style="width: 55%; height: 55%; margin-bottom: 20%;" class="RegularThumbnail">\n                            <img v-bind:src="btn.rolloverImages" v-bind:alt="btn.altText" class="HoverThumbnail"> \n                            <p class="categoryText" style="text-transform: uppercase;">{{btn.labels}}</p>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>'}),Vue.component("featured-data",{data:function(){return{datasets:[]}},created:function(){this.load_dataset_json()},methods:{load_dataset_json:function(){$.ajaxSetup({async:!1});var t=this;$.getJSON("template_datasets.json",function(e){var a;for(a=0;a<Math.min(e.maxDatasetCount,e.datasets.length);a++)t.datasets.push({url:e.datasets[a].url,image:e.datasets[a].image,altText:e.datasets[a].altText,name:e.datasets[a].name,desc:e.datasets[a].description,id:"fds"+a,dataId:e.datasets[a].url.substring(e.datasets[a].url.length-9,e.datasets[a].url.length)})}),$.ajaxSetup({async:!0})}},template:'<div id="DatasetDiv" style="text-align: center;">\n            <img class="contentIndicator" style="top: -30px" src="/data/images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="FeaturedDataArea">\n                <p class="headingFont" style="background-color: #152350; color: white; padding-top: 3%;">FEATURED DATA SETS</p>\n            </div>\n            <div class="contentArea" style="background-color: #152350;">\n                <div style="display: flex; margin-left: 8%; margin-right: 8%; " id="datasetArea">\n                    <div id="bulmaDatasetFDS" class="columns is-multiline">\n                        <div v-for="dataset in datasets" class="column is-one-quarter" style="background: #FFFFFF; margin: 5% auto; padding: 0; max-width: 50%; min-width: 300px;" v-bind:id="dataset.id">\n                            <a v-bind:href="dataset.url" target="_blank">\n                                <img v-bind:src="dataset.image" v-bind:alt="dataset.altText" class="featuredDataThumbnail">\n                                <p class="featuredHeading">{{dataset.name}}</p>\n                                <p style="color: black; margin-left: 7%; margin-right: 7%; text-align: left">{{dataset.desc}}</p>\n                                <br> \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'});var myVue=new Vue({el:"#searchTerms"});$(document).ready(function(){$(window).scroll(function(){$(window).scrollTop()>58&&($(".navigation-bar").addClass("navbar-fixed"),$(".TitleText").attr("style","padding-top:130px")),$(window).scrollTop()<58&&($(".navigation-bar").removeClass("navbar-fixed"),$(".TitleText").attr("style","padding-top:40px"))})});