'use strict';Vue.component('dot-header',{template:'<div id="dotTopBanner" style="width: 100%; background: #152350; height: 60px; padding: 5px 0 0 10px">\n                <a style="background: none" href="https://transportation.gov">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 35px; margin-left: 25px; margin-top: 8px;"alt="department of transportation logo">\n                </a>\n                <div id="dotTopLinks" style="line-height: 30px; background: #04214f">\n                    <a class="headHovers" href="https://www.transportation.gov/mission/about-us" style="font-size: 11px; width: 70px; background: #04214f">ABOUT DOT&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/briefingroom" style="font-size: 11px; width: 80px; background: #04214f">&emsp;&nbsp;BRIEFING ROOM&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/our-activities" style="margin-right: 30px; font-size: 11px; width: 70px; background: #04214f">&emsp;&nbsp;OUR ACTIVITIES</a>\n                </div>\n            </div>'}),Vue.component('navigation-top',{template:'<div class="navigation-bar navBarLinks">\n                 <a class="headHovers navBarLinks" href="/">ITS JPO SITE</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data">HOME</a> <div style="font-size: 15px; padding:3px 5px 7px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/about/">ABOUT</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/public-access/">PUBLIC ACCESS</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/metrics/">METRICS</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/visualizations/">VISUALIZATIONS</a>\n                 <a class="headHovers navBarLinks" href="https://github.com/usdot-its-jpo-data-portal/microsite" style="float:right; text-align:right;padding:3px 7px 3px 7px;">VIEW THIS PROJECT ON GITHUB</a>\n             </div>'}),Vue.component('microsite-footer',{data:function data(){return{contact_email:''}},created:function created(){var c=this;$.getJSON('/data/template_categories.json',function(d){c.contact_email=d.contact_email})},template:'<div id="footerInfo" style="padding-top: 20px;">\n                <div style="display:inline; font-size:50px; font-weight:100; text-align:center">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 30px;margin-right: 3px;" alt="DOT Logo" /> \n                    |\n                    <img src="/data/images/icons/ITS_JPO.png" style="height: 27px" alt="ITS JPO Logo" /> \n                </div>\n                <p style="font-weight: bold;">Questions? Contact Us</p>\n                <p id="contactEmail">{{ contact_email }}</p>\n            </div>'}),Vue.component('search-main',{props:['query'],data:function data(){return{background_image:'',search_placeholder:'',socrata_url:'https://api.us.socrata.com/api/catalog/v1?q=',socrata_domain:'data.transportation.gov',query:'',totalDataCount:0}},created:function created(){this.datasetCount();var c=this;$.getJSON('/data/template_categories.json',function(d){c.background_image=d.background_image})},methods:{datasetCount:function datasetCount(){var c=this;$.get(c.socrata_url+'&search_context='+c.socrata_domain,function(d){c.totalDataCount=d.results.length,c.search_placeholder=c.totalDataCount.toString()+' data sets and counting!'})},searchSend:function searchSend(c){sessionStorage.setItem('sentSearchTerm',c),window.location.href='search.html'}},template:'<div class="TitleText" style="padding-top: 40px;">\n                    <p class="searchHeaderText">EXPLORE OUR DATA</p>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-top: 10px;">Department of Transportation ITS JPO Data</h3>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-bottom: 12px;"> Welcome to the ITS JPO public access point for ITS data</h3>\n\n                    <label for="mainSearch" class="hidden">Search</label>\n                    <input class="mainSearch" id="mainSearch" v-model="query" v-on:keyup.enter="searchSend(query)" v-bind:placeholder="search_placeholder"><button class="searchButton" v-on:click="searchSend(query)">SEARCH</button>\n                </div>'}),Vue.component('search-results',{props:['query'],data:function data(){return{NTLJson:[],searchResults:[],relevanceSortedSearchResults:[],dateSortedSearchResults:[],nameSortedSearchResults:[],socrata_url:'https://api.us.socrata.com/api/catalog/v1?q=',socrata_domain:'data.transportation.gov',seeMoreToggler:[]}},created:function created(){this.loadNTL(),this.search(this.query)},methods:{search:function search(c){var d=this;d.searchResults=[],d.addSocratatoSearchResult(c),d.addNTLtoSearchResult(c),d.relevanceSortedSearchResults=d.searchResults.slice(),d.dateSortedSearchResults=d.searchResults.slice(),d.dateSortedSearchResults.sort(d.compareDate),d.nameSortedSearchResults=d.searchResults.slice(),d.nameSortedSearchResults.sort(d.compareName);for(var e=0;e<d.searchResults.length;++e)d.seeMoreToggler[e]=!0;document.getElementsByClassName('filterRelevance')[0].checked=!0},loadNTL:function loadNTL(){$.ajaxSetup({async:!1});var c,d=this;$.get('https://rosap.ntl.bts.gov/fedora/export/view/collection/'+'dot:239'+'?from=2018-01-01T00:00:00Z'+'&rows=9999',function(j){var k=JSON.parse(j);for(c=0;c<k.response.docs.length;c++)if('Dataset'==k.response.docs[c]['mods.sm_resource_type'][0]){var l={name:k.response.docs[c]['dc.title'][0],description:k.response.docs[c]['mods.abstract'][0],date:d.formatDate(k.response.docs[c]['fgs.createdDate'])},m,n=[];for(n[0]='Research Results',m=0;m<k.response.docs[c]['mods.sm_key_words'].length;m++)n[m+1]=k.response.docs[c]['mods.sm_key_words'][m];l.tags=n,l.tags.sort();var p=k.response.docs[c].PID.split(':')[1];l.link='https://rosap.ntl.bts.gov/view/dot/'+p,d.NTLJson.push(l)}}),$.ajaxSetup({async:!0})},addNTLtoSearchResult:function addNTLtoSearchResult(c){var d,e=this;for(d=0;d<e.NTLJson.length;d++)if(-1<e.NTLJson[d].name.toLowerCase().search(c.toLowerCase()))e.searchResults.push(e.NTLJson[d]);else if(-1<e.NTLJson[d].description.toLowerCase().search(c.toLowerCase()))e.searchResults.push(e.NTLJson[d]);else{var f;for(f=0;f<e.NTLJson[d].tags.length;f++)if(-1<e.NTLJson[d].tags[f].toLowerCase().search(c.toLowerCase())){e.searchResults.push(e.NTLJson[d]);break}}},addSocratatoSearchResult:function addSocratatoSearchResult(c){var d,e=this;$.get(e.socrata_url+c+'&search_context='+e.socrata_domain,function(f){for(d=0;d<f.results.length;d++){var g={name:f.results[d].resource.name,description:f.results[d].resource.description,date:7>f.results[d].resource.updatedAt.substring(0,10)?f.results[d].resource.updatedAt.substring(0,10):e.formatDate(f.results[d].resource.updatedAt.substring(0,10))},h,j=[];for(h=0;h<f.results[d].classification.domain_tags.length;h++)j[h]=f.results[d].classification.domain_tags[h];g.tags=j,g.tags.sort(),g.link=f.results[d].link,e.searchResults.push(g)}})},compareName:function compareName(c,d){var e=this,f=c.name.toUpperCase(),g=d.name.toUpperCase(),h=0;return f>g?h=1:f<g&&(h=-1),h},compareDate:function compareDate(c,d){var e=this,f=new Date(c.date),g=new Date(d.date),h=0;return f<g?h=1:f>g&&(h=-1),h},formatDate:function formatDate(c){var e=new Date(c),f=e.getDate(),g=e.getMonth(),h=e.getFullYear();return['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][g]+' '+f+' '+h},dropDownFilter:function dropDownFilter(){var c=this;document.getElementsByClassName('filterName')[0].checked?c.searchResults=c.nameSortedSearchResults.slice():document.getElementsByClassName('filterDate')[0].checked?c.searchResults=c.dateSortedSearchResults.slice():document.getElementsByClassName('filterRelevance')[0].checked&&(c.searchResults=c.relevanceSortedSearchResults.slice())},toggleSeeMore:function toggleSeeMore(c){this.seeMoreToggler[c]=!this.seeMoreToggler[c],this.$forceUpdate()}},template:'<div id="searchresults" class="contentArea searchResults">\n                    <br>\n                    <div style="display: flex;">\n                        <button id="returnPage" class="readButton" style="font-size: 15px; margin-left: 80px;margin-bottom: 10px" v-on:click="window.location.href = \'/data/\'">Return to Main Page &raquo;</button>\n                    </div>\n                    <div style="display: flex; float: right; margin-right: 80px">\n                        <p style="line-height: 1.8" class="resultsSectionHeading">Sort By: &nbsp;</p>\n                        <nav class="segmented-button">\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="R" id="seg-Relevance" class="filterRelevance" checked>\n                            <label for="seg-Relevance" class="first">Relevance</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="N" id="seg-Name" class="filterName">\n                            <label for="seg-Name" class="first">Name</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="D" id="seg-Date" class="filterDate">\n                            <label for="seg-Date" class="last">Date</label>\n                        </nav>\n                    </div>\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>SEARCH RESULTS FOR:&nbsp;</b></p>\n                        <p class="resultsQuery"><b id="resultsQuery">{{query}}</b></p><br>\n                    </div>\n\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>Number of results:&nbsp;</b><p>\n                        <p class="resultsCount"><b>{{searchResults.length}}</b></p><br>\n                    </div>\n\n\n\n                    <hr class="resultsDivider" noshade>\n                    <br>\n\n                    <!--generates a bullet point for each search result item-->\n                    <div style="margin-left: 100px; margin-right: 100px;">\n\n                        <!--displays results if there are results-->\n                        <ul v-if="searchResults.length > 0" style="list-style: none; padding-left: 0px;">\n                            <li v-model="seeMoreToggler" v-for="(item,index) in searchResults" style="margin-bottom: 30px; list-style: none;">\n\n                                <table style="width: 100%">\n                                    <tr>\n                                        <td style="width: 70%">\n                                            <!--the data set name-->\n                                            <a class=\'resultItemHeader\' style="padding-right: 0%" :href="item.link" target="_blank">\n                                                {{ item.name }}\n\n                                            </a>\n                                        </td>\n                                        <td style="text-align: right; width: 30%">\n                                            <p class="resultItemHeader" style="float: right; font-size: 18px;">\n                                                Date Added: {{ item.date}}\n                                            </p>\n                                        </td>\n                                    </tr>\n                                </table>\n                                <!--the data set description-->\n                                <p v-if="item.description.length > 300 && seeMoreToggler[index] && item.description.indexOf(\' \', 290) != -1" style="font-size: 15px; padding-top: 5px;">{{ item.description.substring(0,item.description.indexOf(" ", 290))}}...</br><button class="readButton" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p v-else-if="item.description.length > 300 && seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;">{{ item.description.substring(0,item.description.lastIndexOf(" "))}}...</br><button class="readButton" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p v-else-if="item.description.length > 300 && !seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;">{{ item.description }}</br><button class="readButton" v-on:click="toggleSeeMore(index)">Read Less</button></p>\n                                <p v-else-if="item.description.length > 0" style="font-size: 15px; padding-top: 5px;">{{ item.description}}</p>\n                                <p v-else style="font-size: 15px; padding-top: 5px;">No description available.</p>\n\n                                <!--lists the domain tags-->\n                                <div v-if="item.tags.length > 0" style="padding-top: 5px;">\n                                    <p style="float:left; padding: 3px; height: 30px; line-height: 30px;">Tags: </p>\n                                    <button v-for="tag in item.tags" class=\'tag\' v-on:click="search(tag)">{{tag}}</button>\n                                </div>\n                                <hr v-if="searchResults.length != index+1" style="border-color: #DEDEDE" noshade>\n                            </li>\n                            <div v-else>\n                                <p>No search results.</p>\n                            </div>\n                    </div>\n                </div>'}),Vue.component('category-search',{data:function data(){return{buttons:[]}},created:function created(){this.load_categories_json()},methods:{load_categories_json:function load_categories_json(){var c=this;$.ajaxSetup({async:!1}),$.getJSON('template_categories.json',function(d){var e;for(e=0;e<Math.min(d.maxButtonCount,d.buttons.length);e++)c.buttons.push({labels:d.buttons[e].CategoryName,imgIcons:d.buttons[e].imgIcons,rolloverImages:d.buttons[e].rolloverImages,altText:d.buttons[e].altText,id:'bterm'+e})}),$.ajaxSetup({async:!0})},searchSend:function searchSend(c){sessionStorage.setItem('sentSearchTerm',c),window.location.href='search.html'}},template:'\n        <div id="categoryDiv">\n            <img class="contentIndicator" style="top: -57px" src="images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="CategoryAreaHead">\n                <p class="headingFont" style="color: #3585B2">POPULAR DATA SET TOPICS</p>\n            </div>\n\n            <div id="categoryArea" class="contentArea categorylayout">\n                <div id="bulmaDataset" class="columns is-multiline" style="padding: 0 0 5% 0; height: 100%">\n                    <div class="bulmaCategories column is-one-quarter" v-for="btn in buttons">\n                        <button v-bind:id="btn.id" class="topic" vertical-align="middle" style="padding-bottom: 10px;" v-on:click="searchSend(btn.labels)">\n                            <img v-bind:src="btn.imgIcons" v-bind:alt="btn.altText" style="width: 55%; height: 55%; margin-bottom: 20%;" class="RegularThumbnail">\n                            <img v-bind:src="btn.rolloverImages" v-bind:alt="btn.altText" class="HoverThumbnail"> \n                            <p class="categoryText" style="text-transform: uppercase;">{{btn.labels}}</p>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>'}),Vue.component('featured-data',{data:function data(){return{datasets:[]}},created:function created(){this.load_dataset_json()},methods:{load_dataset_json:function load_dataset_json(){$.ajaxSetup({async:!1});var c=this;$.getJSON('template_datasets.json',function(d){var e;for(e=0;e<Math.min(d.maxDatasetCount,d.datasets.length);e++)c.datasets.push({url:d.datasets[e].url,image:d.datasets[e].image,altText:d.datasets[e].altText,name:d.datasets[e].name,desc:d.datasets[e].description,id:'fds'+e,dataId:d.datasets[e].url.substring(d.datasets[e].url.length-9,d.datasets[e].url.length)})}),$.ajaxSetup({async:!0})}},template:'<div id="DatasetDiv" style="text-align: center;">\n            <img class="contentIndicator" style="top: -30px" src="/data/images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="FeaturedDataArea">\n                <p class="headingFont" style="background-color: #152350; color: white; padding-top: 3%;">FEATURED DATA SETS</p>\n            </div>\n            <div class="contentArea" style="background-color: #152350;">\n                <div style="display: flex; margin-left: 8%; margin-right: 8%; " id="datasetArea">\n                    <div id="bulmaDatasetFDS" class="columns is-multiline">\n                        <div v-for="dataset in datasets" class="column is-one-quarter" style="background: #FFFFFF; margin: 5% auto; padding: 0; max-width: 50%; min-width: 300px;" v-bind:id="dataset.id">\n                            <a v-bind:href="dataset.url" target="_blank">\n                                <img v-bind:src="dataset.image" v-bind:alt="dataset.altText" class="featuredDataThumbnail">\n                                <p class="featuredHeading">{{dataset.name}}</p>\n                                <p style="color: black; margin-left: 7%; margin-right: 7%; text-align: left">{{dataset.desc}}</p>\n                                <br> \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'});var myVue=new Vue({el:'#searchTerms'});$(document).ready(function(){$(window).scroll(function(){58<$(window).scrollTop()&&($('.navigation-bar').addClass('navbar-fixed'),$('.TitleText').attr('style','padding-top:130px')),58>$(window).scrollTop()&&($('.navigation-bar').removeClass('navbar-fixed'),$('.TitleText').attr('style','padding-top:40px'))})});