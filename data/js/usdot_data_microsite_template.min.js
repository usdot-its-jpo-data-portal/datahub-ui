"use strict";Vue.component("dot-header",{template:'<div id="dotTopBanner" style="width: 100%; background: #152350; height: 60px; padding: 5px 0 0 10px">\n                <a style="background: none" href="https://transportation.gov">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 35px; margin-left: 25px; margin-top: 8px;"alt="department of transportation logo">\n                </a>\n                <div id="dotTopLinks" style="line-height: 30px; background: #04214f">\n                    <a class="headHovers" href="https://www.transportation.gov/mission/about-us" style="font-size: 11px; width: 70px; background: #04214f">ABOUT DOT&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/briefingroom" style="font-size: 11px; width: 80px; background: #04214f">&emsp;&nbsp;BRIEFING ROOM&emsp;&nbsp;|</a>\n                    <a class="headHovers" href="https://www.transportation.gov/our-activities" style="margin-right: 30px; font-size: 11px; width: 70px; background: #04214f">&emsp;&nbsp;OUR ACTIVITIES</a>\n                </div>\n            </div>'}),Vue.component("navigation-top",{template:'<div class="navigation-bar navBarLinks">\n                 <a class="headHovers navBarLinks" href="/">ITS JPO SITE</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data">HOME</a> <div style="font-size: 15px; padding:3px 5px 7px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/about/">ABOUT</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/public-access/">PUBLIC ACCESS</a> <div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/metrics/">METRICS</a><div style="font-size: 15px; padding:3px 7px 3px 7px; display: inline;">|</div>\n                 <a class="headHovers navBarLinks" href="/data/visualizations/">VISUALIZATIONS</a>\n                 <a class="headHovers navBarLinks" href="https://github.com/usdot-its-jpo-data-portal/microsite" style="float:right; text-align:right;padding:3px 7px 3px 7px;">VIEW THIS PROJECT ON GITHUB</a>\n             </div>'}),Vue.component("microsite-footer",{data:function(){return{contact_email:""}},created:function(){var e=this;$.getJSON("/data/template_categories.json",function(t){e.contact_email=t.contact_email})},template:'<div id="footerInfo" style="padding-top: 20px;">\n                <div style="display:inline; font-size:50px; font-weight:100; text-align:center">\n                    <img src="/data/images/icons/dot_logo.png" style="height: 30px;margin-right: 3px;" alt="DOT Logo" /> \n                    |\n                    <img src="/data/images/icons/ITS_JPO.png" style="height: 27px" alt="ITS JPO Logo" /> \n                </div>\n                <p style="font-weight: bold;">Questions? Contact Us</p>\n                <p id="contactEmail">{{ contact_email }}</p>\n            </div>'}),Vue.component("search-main",{props:["query"],data:function(){return{background_image:"",search_placeholder:"",socrata_url:"https://api.us.socrata.com/api/catalog/v1?q=",socrata_domain:"data.transportation.gov",query:"",totalDataCount:0}},created:function(){this.datasetCount();var e=this;$.getJSON("/data/template_categories.json",function(t){e.background_image=t.background_image})},methods:{datasetCount:function(){var e=this;$.get(e.socrata_url+"&search_context="+e.socrata_domain+"&domains=data.transportation.gov&tags=intelligent%20transportation%20systems%20(its)",function(t){e.totalDataCount=t.results.length,e.search_placeholder=e.totalDataCount.toString()+" data sets and counting!"})},searchSend:function(e){sessionStorage.setItem("sentSearchTerm",e),window.location.href="search.html"}},template:'<div class="TitleText" style="padding-top: 40px;">\n                    <p class="searchHeaderText">EXPLORE OUR DATA</p>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-top: 10px;">Department of Transportation ITS JPO Data</h3>\n                    <h3 style="font-size: 18px; color: white; text-align: center; margin-bottom: 12px;"> Welcome to the ITS JPO public access point for ITS data</h3>\n\n                    <label for="mainSearch" class="hidden">Search</label>\n                    <input class="mainSearch" id="mainSearch" v-model="query" v-on:keyup.enter="searchSend(query)" v-bind:placeholder="search_placeholder"><button class="searchButton" v-on:click="searchSend(query)">SEARCH</button>\n                </div>'}),Vue.component("search-results",{props:["query"],data:function(){return{NTLJson:[],searchResults:[],relevanceSortedSearchResults:[],dateSortedSearchResults:[],nameSortedSearchResults:[],socrata_url:"https://api.us.socrata.com/api/catalog/v1?q=",socrata_domain:"data.transportation.gov",seeMoreToggler:[]}},created:function(){this.loadNTL(),this.search(this.query)},methods:{search:function(e){this.searchResults=[],this.addSocratatoSearchResult(e),this.addNTLtoSearchResult(e),this.relevanceSortedSearchResults=this.searchResults.slice(),this.dateSortedSearchResults=this.searchResults.slice(),this.dateSortedSearchResults.sort(this.compareDate),this.nameSortedSearchResults=this.searchResults.slice(),this.nameSortedSearchResults.sort(this.compareName);for(var t=0;t<this.searchResults.length;t+=1)this.seeMoreToggler[t]=!0},loadNTL:function(){var e;$.ajaxSetup({async:!1});var t=this,s="";$.get("https://rosap.ntl.bts.gov/fedora/export/view/collection/dot:239?from=2018-01-01T00:00:00Z&rows=9999",function(a){var n=JSON.parse(a);for(e=0;e<n.response.docs.length;e++)if("Dataset"==n.response.docs[e]["mods.sm_resource_type"][0]){var i,o={};o.name=n.response.docs[e]["dc.title"][0],o.description=n.response.docs[e]["mods.abstract"][0],o.date=t.formatDate(n.response.docs[e]["fgs.createdDate"]),""!=(s=n.response.docs[e]["rdf.isOpenAccess"][0])&&null!=s||(o.accessLevelIsPublic="Public"),o.accessLevelIsPublic="true"==s?"Public":"Restricted";var r=[];for(r[0]="Research Results",i=0;i<n.response.docs[e]["mods.sm_key_words"].length;i++)r[i+1]=n.response.docs[e]["mods.sm_key_words"][i];o.tags=r,o.tags.sort();var l=n.response.docs[e].PID.split(":")[1];o.link="https://rosap.ntl.bts.gov/view/dot/"+l,t.NTLJson.push(o),0}}),$.ajaxSetup({async:!0})},addNTLtoSearchResult:function(e){var t;for(t=0;t<this.NTLJson.length;t++)if(this.NTLJson[t].name.toLowerCase().search(e.toLowerCase())>-1)this.searchResults.push(this.NTLJson[t]);else if(this.NTLJson[t].description.toLowerCase().search(e.toLowerCase())>-1)this.searchResults.push(this.NTLJson[t]);else{var s;for(s=0;s<this.NTLJson[t].tags.length;s++)if(this.NTLJson[t].tags[s].toLowerCase().search(e.toLowerCase())>-1){this.searchResults.push(this.NTLJson[t]);break}}},addSocratatoSearchResult:function(e){var t,s,a=this,n="";$.get(a.socrata_url+e+"&search_context="+a.socrata_domain+"&domains=data.transportation.gov&tags=intelligent%20transportation%20systems%20(its)",function(e){for(t=0;t<e.results.length;t++){var i,o={};for(s in o.name=e.results[t].resource.name,o.description=e.results[t].resource.description,e.results[t].classification.domain_metadata)"Common-Core_Public-Access-Level"==e.results[t].classification.domain_metadata[s].key&&(n=e.results[t].classification.domain_metadata[s].value);o.accessLevelIsPublic="public"==n||"Public"==n?"Public":"Restricted",o.date=e.results[t].resource.updatedAt.substring(0,10)<7?e.results[t].resource.updatedAt.substring(0,10):a.formatDate(e.results[t].resource.updatedAt);var r=[];for(i=0;i<e.results[t].classification.domain_tags.length;i++)r[i]=e.results[t].classification.domain_tags[i];o.tags=r,o.tags.sort(),o.link=e.results[t].link,a.searchResults.push(o)}for(var l=0;l<a.searchResults.length;l+=1)a.seeMoreToggler[l]=!0;a.relevanceSortedSearchResults=a.searchResults.slice(),a.dateSortedSearchResults=a.searchResults.slice(),a.dateSortedSearchResults.sort(a.compareDate),a.nameSortedSearchResults=a.searchResults.slice(),a.nameSortedSearchResults.sort(a.compareName)});for(var i=0;i<a.searchResults.length;i+=1)a.seeMoreToggler[i]=!0},compareName:function(e,t){var s=e.name.toUpperCase(),a=t.name.toUpperCase(),n=0;return s>a?n=1:s<a&&(n=-1),n},compareDate:function(e,t){var s=new Date(e.date),a=new Date(t.date),n=0;return s<a?n=1:s>a&&(n=-1),n},formatDate:function(e){var t=new Date(e),s=t.getUTCDate(),a=t.getUTCMonth(),n=t.getUTCFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]+" "+s+" "+n},dropDownFilter:function(){document.getElementsByClassName("filterName")[0].checked?this.searchResults=this.nameSortedSearchResults.slice():document.getElementsByClassName("filterDate")[0].checked?this.searchResults=this.dateSortedSearchResults.slice():document.getElementsByClassName("filterRelevance")[0].checked&&(this.searchResults=this.relevanceSortedSearchResults.slice())},toggleSeeMore:function(e){this.seeMoreToggler[e]=!this.seeMoreToggler[e],this.$forceUpdate()}},template:'<div id="searchresults" class="contentArea searchResults">\n                    <br>\n                    <div style="display: flex;">\n                        <a id="returnPage" class="readButton" style="font-size: 15px; margin-left: 80px;margin-bottom: 10px" v-on:click="window.location.href = \'/data/\'">Return to Home Page &raquo;</a>\n                    </div>\n                    <div style="display: flex; float: right; margin-right: 80px">\n                        <p style="line-height: 1.8" class="resultsSectionHeading">Sort By: &nbsp;</p>\n                        <nav class="segmented-button">\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="R" id="seg-Relevance" class="filterRelevance" checked>\n                            <label for="seg-Relevance" class="first">Relevance</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="N" id="seg-Name" class="filterName">\n                            <label for="seg-Name" class="first">Name</label>\n                            <input v-on:click="dropDownFilter" type="radio" name="seg-1" value="D" id="seg-Date" class="filterDate">\n                            <label for="seg-Date" class="last">Date</label>\n                        </nav>\n                    </div>\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>SEARCH RESULTS FOR:&nbsp;</b></p>\n                        <p class="resultsQuery"><b id="resultsQuery">{{query}}</b></p><br>\n                    </div>\n\n                    <div style="display: flex;">\n                        <p class="resultsSectionHeading"><b>Number of results:&nbsp;</b><p>\n                        <p class="resultsCount"><b>{{searchResults.length}}</b></p><br>\n                    </div>\n\n\n\n                    <hr class="resultsDivider" noshade>\n                    <br>\n\n                    \x3c!--generates a bullet point for each search result item--\x3e\n                    <div class="search-results-div" style="margin-left: 100px; margin-right: 100px;">\n\n                        \x3c!--displays results if there are results--\x3e\n                        <ul v-if="searchResults.length > 0" style="list-style: none; padding-left: 0px;">\n                            <li v-model="seeMoreToggler" v-for="(item,index) in searchResults" style="margin-bottom: 30px; list-style: none;">\n\n                                <table style="width: 100%">\n                                    <tr>\n                                        <td style="width: 70%">\n                                            \x3c!--the data set name--\x3e\n                                            <a class=\'resultItemHeader\' style="padding-right: 0%" :href="item.link" target="_blank">\n                                                {{ item.name }}\n\n                                            </a>\n                                        </td>\n                                        <td style="text-align: right; width: 30%;">\n                                            <p class="resultItemHeader date-access">\n                                                <span class="slightly-bold">Date Added:</span> {{ item.date}}\n                                                <br />\n                                                <span class="slightly-bold">Access:</span> {{ item.accessLevelIsPublic}}\n                                            </p>\n                                        </td>\n                                    </tr>\n                                </table>\n                                \x3c!--the data set description--\x3e\n                                <p class="dataset-description" v-if="item.description.length > 300 && seeMoreToggler[index] && item.description.indexOf(\' \', 290) != -1" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description.substring(0,item.description.indexOf(\' \', 290))"></span>...&nbsp;&nbsp; <button class="btn-read-more-less one" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 300 && seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description.substring(0,item.description.lastIndexOf(\' \'))"></span>{{ item.description.substring(0,item.description.lastIndexOf(" "))}}...&nbsp;&nbsp; <button class="btn-read-more-less two" v-on:click="toggleSeeMore(index)">Read More</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 300 && !seeMoreToggler[index]" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description"></span>&nbsp;&nbsp; <button class="btn-read-more-less three" v-on:click="toggleSeeMore(index)">Read Less</button></p>\n                                <p class="dataset-description" v-else-if="item.description.length > 0" style="font-size: 15px; padding-top: 5px;"><span v-html="item.description"></span></p>\n                                <p class="dataset-description" v-else style="font-size: 15px; padding-top: 5px;">No description available.</p>\n\n                                \x3c!--lists the domain tags--\x3e\n                                <div v-if="item.tags.length > 0" style="padding-top: 5px;">\n                                    <table>\n                                        <td>\n                                            <p class="tags-tag" style="float:left; height: auto; line-height: 20px;">Tags: </p>\n                                        </td>\n                                        <td>\n                                            <button v-for="(tag, index) in item.tags" class=\'tag\' v-on:click="search(tag)">\n                                                {{tag}}\n                                                <span v-if="index != item.tags.length - 1">,</span>    \n                                            </button>\n                                            \n                                        </td>\n                                    </table>\n                                </div>\n                                <hr v-if="searchResults.length != index+1" style="border-color: #DEDEDE" noshade>\n                            </li>\n                            <div v-else>\n                                <p>No search results.</p>\n                            </div>\n                    </div>\n                </div>'}),Vue.component("category-search",{data:function(){return{buttons:[]}},created:function(){this.load_categories_json()},methods:{load_categories_json:function(){var e=this;$.ajaxSetup({async:!1}),$.getJSON("template_categories.json",function(t){var s;for(s=0;s<Math.min(t.maxButtonCount,t.buttons.length);s++)e.buttons.push({labels:t.buttons[s].CategoryName,imgIcons:t.buttons[s].imgIcons,rolloverImages:t.buttons[s].rolloverImages,altText:t.buttons[s].altText,id:"bterm"+s})}),$.ajaxSetup({async:!0})},searchSend:function(e){sessionStorage.setItem("sentSearchTerm",e),window.location.href="search.html"}},template:'\n        <div id="categoryDiv">\n            <img class="contentIndicator" style="top: -57px" src="images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="CategoryAreaHead">\n                <p class="headingFont" style="color: #3585B2">POPULAR DATA SET TOPICS</p>\n            </div>\n\n            <div id="categoryArea" class="contentArea categorylayout">\n                <div id="bulmaDataset" class="columns is-multiline" style="padding: 0 0 5% 0; height: 100%">\n                    <div class="bulmaCategories column is-one-quarter" v-for="btn in buttons">\n                        <button v-bind:id="btn.id" class="topic" vertical-align="middle" style="padding-bottom: 10px;" v-on:click="searchSend(btn.labels)">\n                            <img v-bind:src="btn.imgIcons" v-bind:alt="btn.altText" style="width: 55%; height: 55%; margin-bottom: 20%;" class="RegularThumbnail">\n                            <img v-bind:src="btn.rolloverImages" v-bind:alt="btn.altText" class="HoverThumbnail"> \n                            <p class="categoryText" style="text-transform: uppercase;">{{btn.labels}}</p>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>'}),Vue.component("featured-data",{data:function(){return{datasets:[]}},created:function(){this.load_dataset_json()},methods:{load_dataset_json:function(){$.ajaxSetup({async:!1});var e=this;$.getJSON("template_datasets.json",function(t){var s;for(s=0;s<Math.min(t.maxDatasetCount,t.datasets.length);s++)e.datasets.push({url:t.datasets[s].url,image:t.datasets[s].image,altText:t.datasets[s].altText,name:t.datasets[s].name,desc:t.datasets[s].description,id:"fds"+s,dataId:t.datasets[s].url.substring(t.datasets[s].url.length-9,t.datasets[s].url.length)})}),$.ajaxSetup({async:!0})}},template:'<div id="DatasetDiv" style="text-align: center;">\n            <img class="contentIndicator" style="top: -30px" src="/data/images/icons/ContentIndicator.png" alt="Content Indicator Arrow"/>\n            <div id="FeaturedDataArea">\n                <p class="headingFont" style="background-color: #152350; color: white; padding-top: 3%;">FEATURED DATA SETS</p>\n            </div>\n            <div class="contentArea" style="background-color: #152350;">\n                <div style="display: flex; margin-left: 8%; margin-right: 8%; " id="datasetArea">\n                    <div id="bulmaDatasetFDS" class="columns is-multiline">\n                        <div v-for="dataset in datasets" class="column is-one-quarter" style="background: #FFFFFF; margin: 5% auto; padding: 0; max-width: 50%; min-width: 300px;" v-bind:id="dataset.id">\n                            <a v-bind:href="dataset.url" target="_blank">\n                                <img v-bind:src="dataset.image" v-bind:alt="dataset.altText" class="featuredDataThumbnail">\n                                <p class="featuredHeading">{{dataset.name}}</p>\n                                <p style="color: black; margin-left: 7%; margin-right: 7%; text-align: left">{{dataset.desc}}</p>\n                                <br> \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>'});var myVue=new Vue({el:"#searchTerms"});$(document).ready(function(){$(window).scroll(function(){$(window).scrollTop()>58&&($(".navigation-bar").addClass("navbar-fixed"),$(".TitleText").attr("style","padding-top:130px")),$(window).scrollTop()<58&&($(".navigation-bar").removeClass("navbar-fixed"),$(".TitleText").attr("style","padding-top:40px"))})});